import Signals from '@interactjs/utils/Signals';
import test from '@interactjs/_dev/test/test';
import Interaction from '../Interaction';
import interactions from '../interactions';
import * as helpers from './helpers';
test('interactions', t => {
    let scope = helpers.mockScope();
    interactions.install(scope);
    const interaction = interactions.newInteraction({ pointerType: 'TEST' }, scope);
    t.equal(scope.interactions.list[0], interaction, 'new Interaction is pushed to scope.interactions');
    interactions.install(scope);
    t.ok(scope.interactions instanceof Object, 'interactions object added to scope');
    const listeners = scope.interactions.listeners;
    t.ok(interactions.methodNames.reduce((acc, m) => acc && typeof listeners[m] === 'function', true), 'interactions object added to scope');
    scope = helpers.mockScope();
    interactions.install(scope);
    const newInteraction = scope.interactions.new({});
    t.assert(typeof scope.interactions === 'object');
    t.assert(scope.interactions.signals instanceof Signals);
    t.assert(typeof scope.interactions.new === 'function');
    t.assert(newInteraction instanceof Interaction);
    t.equal(newInteraction._signals, scope.interactions.signals);
    t.assert(typeof scope.actions === 'object');
    t.deepEqual(scope.actions.names, []);
    t.deepEqual(scope.actions.methodDict, {});
    t.end();
});
test('interactions document event options', t => {
    const scope = helpers.mockScope();
    const doc = scope.document;
    let options = {};
    scope.browser = { isIOS: false };
    scope.signals.fire('add-document', { doc, scope, options });
    t.deepEqual(options, {}, 'no doc options.event.passive is added when not iOS');
    options = {};
    scope.browser.isIOS = true;
    scope.signals.fire('add-document', { doc, scope, options });
    t.deepEqual(options, { events: { passive: false } }, 'doc options.event.passive is set to false for iOS');
    t.end();
});
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoiaW50ZXJhY3Rpb25zLmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsiaW50ZXJhY3Rpb25zLnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sT0FBTyxNQUFNLDJCQUEyQixDQUFBO0FBQy9DLE9BQU8sSUFBSSxNQUFNLDRCQUE0QixDQUFBO0FBQzdDLE9BQU8sV0FBVyxNQUFNLGdCQUFnQixDQUFBO0FBQ3hDLE9BQU8sWUFBWSxNQUFNLGlCQUFpQixDQUFBO0FBQzFDLE9BQU8sS0FBSyxPQUFPLE1BQU0sV0FBVyxDQUFBO0FBRXBDLElBQUksQ0FBQyxjQUFjLEVBQUUsQ0FBQyxDQUFDLEVBQUU7SUFDdkIsSUFBSSxLQUFLLEdBQUcsT0FBTyxDQUFDLFNBQVMsRUFBRSxDQUFBO0lBRS9CLFlBQVksQ0FBQyxPQUFPLENBQUMsS0FBSyxDQUFDLENBQUE7SUFFM0IsTUFBTSxXQUFXLEdBQUcsWUFBWSxDQUFDLGNBQWMsQ0FDN0MsRUFBRSxXQUFXLEVBQUUsTUFBTSxFQUFFLEVBQ3ZCLEtBQUssQ0FDTixDQUFBO0lBRUQsQ0FBQyxDQUFDLEtBQUssQ0FBQyxLQUFLLENBQUMsWUFBWSxDQUFDLElBQUksQ0FBQyxDQUFDLENBQUMsRUFBRSxXQUFXLEVBQzdDLGlEQUFpRCxDQUFDLENBQUE7SUFFcEQsWUFBWSxDQUFDLE9BQU8sQ0FBQyxLQUFLLENBQUMsQ0FBQTtJQUUzQixDQUFDLENBQUMsRUFBRSxDQUFDLEtBQUssQ0FBQyxZQUFZLFlBQVksTUFBTSxFQUFFLG9DQUFvQyxDQUFDLENBQUE7SUFFaEYsTUFBTSxTQUFTLEdBQUcsS0FBSyxDQUFDLFlBQVksQ0FBQyxTQUFTLENBQUE7SUFFOUMsQ0FBQyxDQUFDLEVBQUUsQ0FBQyxZQUFZLENBQUMsV0FBVyxDQUFDLE1BQU0sQ0FBQyxDQUFDLEdBQUcsRUFBRSxDQUFDLEVBQUUsRUFBRSxDQUFDLEdBQUcsSUFBSSxPQUFPLFNBQVMsQ0FBQyxDQUFDLENBQUMsS0FBSyxVQUFVLEVBQUUsSUFBSSxDQUFDLEVBQy9GLG9DQUFvQyxDQUFDLENBQUE7SUFFdkMsS0FBSyxHQUFHLE9BQU8sQ0FBQyxTQUFTLEVBQUUsQ0FBQTtJQUUzQixZQUFZLENBQUMsT0FBTyxDQUFDLEtBQUssQ0FBQyxDQUFBO0lBQzNCLE1BQU0sY0FBYyxHQUFHLEtBQUssQ0FBQyxZQUFZLENBQUMsR0FBRyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBRWpELENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMsWUFBWSxLQUFLLFFBQVEsQ0FBQyxDQUFBO0lBQ2hELENBQUMsQ0FBQyxNQUFNLENBQUMsS0FBSyxDQUFDLFlBQVksQ0FBQyxPQUFPLFlBQVksT0FBTyxDQUFDLENBQUE7SUFDdkQsQ0FBQyxDQUFDLE1BQU0sQ0FBQyxPQUFPLEtBQUssQ0FBQyxZQUFZLENBQUMsR0FBRyxLQUFLLFVBQVUsQ0FBQyxDQUFBO0lBQ3RELENBQUMsQ0FBQyxNQUFNLENBQUMsY0FBYyxZQUFZLFdBQVcsQ0FBQyxDQUFBO0lBQy9DLENBQUMsQ0FBQyxLQUFLLENBQUMsY0FBYyxDQUFDLFFBQVEsRUFBRSxLQUFLLENBQUMsWUFBWSxDQUFDLE9BQU8sQ0FBQyxDQUFBO0lBRTVELENBQUMsQ0FBQyxNQUFNLENBQUMsT0FBTyxLQUFLLENBQUMsT0FBTyxLQUFLLFFBQVEsQ0FBQyxDQUFBO0lBQzNDLENBQUMsQ0FBQyxTQUFTLENBQUMsS0FBSyxDQUFDLE9BQU8sQ0FBQyxLQUFLLEVBQUUsRUFBRSxDQUFDLENBQUE7SUFDcEMsQ0FBQyxDQUFDLFNBQVMsQ0FBQyxLQUFLLENBQUMsT0FBTyxDQUFDLFVBQVUsRUFBRSxFQUFFLENBQUMsQ0FBQTtJQUV6QyxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDVCxDQUFDLENBQUMsQ0FBQTtBQUVGLElBQUksQ0FBQyxxQ0FBcUMsRUFBRSxDQUFDLENBQUMsRUFBRTtJQUM5QyxNQUFNLEtBQUssR0FBRyxPQUFPLENBQUMsU0FBUyxFQUFFLENBQUE7SUFDakMsTUFBTSxHQUFHLEdBQUcsS0FBSyxDQUFDLFFBQVEsQ0FBQTtJQUUxQixJQUFJLE9BQU8sR0FBRyxFQUFFLENBQUE7SUFDaEIsS0FBSyxDQUFDLE9BQU8sR0FBRyxFQUFFLEtBQUssRUFBRSxLQUFLLEVBQUUsQ0FBQTtJQUNoQyxLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUE7SUFFM0QsQ0FBQyxDQUFDLFNBQVMsQ0FDVCxPQUFPLEVBQ1AsRUFBRSxFQUNGLG9EQUFvRCxDQUFDLENBQUE7SUFFdkQsT0FBTyxHQUFHLEVBQUUsQ0FBQTtJQUVaLEtBQUssQ0FBQyxPQUFPLENBQUMsS0FBSyxHQUFHLElBQUksQ0FBQTtJQUMxQixLQUFLLENBQUMsT0FBTyxDQUFDLElBQUksQ0FBQyxjQUFjLEVBQUUsRUFBRSxHQUFHLEVBQUUsS0FBSyxFQUFFLE9BQU8sRUFBRSxDQUFDLENBQUE7SUFFM0QsQ0FBQyxDQUFDLFNBQVMsQ0FDVCxPQUFPLEVBQ1AsRUFBRSxNQUFNLEVBQUUsRUFBRSxPQUFPLEVBQUUsS0FBSyxFQUFFLEVBQUUsRUFDOUIsbURBQW1ELENBQUMsQ0FBQTtJQUV0RCxDQUFDLENBQUMsR0FBRyxFQUFFLENBQUE7QUFDVCxDQUFDLENBQUMsQ0FBQSIsInNvdXJjZXNDb250ZW50IjpbImltcG9ydCBTaWduYWxzIGZyb20gJ0BpbnRlcmFjdGpzL3V0aWxzL1NpZ25hbHMnXG5pbXBvcnQgdGVzdCBmcm9tICdAaW50ZXJhY3Rqcy9fZGV2L3Rlc3QvdGVzdCdcbmltcG9ydCBJbnRlcmFjdGlvbiBmcm9tICcuLi9JbnRlcmFjdGlvbidcbmltcG9ydCBpbnRlcmFjdGlvbnMgZnJvbSAnLi4vaW50ZXJhY3Rpb25zJ1xuaW1wb3J0ICogYXMgaGVscGVycyBmcm9tICcuL2hlbHBlcnMnXG5cbnRlc3QoJ2ludGVyYWN0aW9ucycsIHQgPT4ge1xuICBsZXQgc2NvcGUgPSBoZWxwZXJzLm1vY2tTY29wZSgpXG5cbiAgaW50ZXJhY3Rpb25zLmluc3RhbGwoc2NvcGUpXG5cbiAgY29uc3QgaW50ZXJhY3Rpb24gPSBpbnRlcmFjdGlvbnMubmV3SW50ZXJhY3Rpb24oXG4gICAgeyBwb2ludGVyVHlwZTogJ1RFU1QnIH0sXG4gICAgc2NvcGVcbiAgKVxuXG4gIHQuZXF1YWwoc2NvcGUuaW50ZXJhY3Rpb25zLmxpc3RbMF0sIGludGVyYWN0aW9uLFxuICAgICduZXcgSW50ZXJhY3Rpb24gaXMgcHVzaGVkIHRvIHNjb3BlLmludGVyYWN0aW9ucycpXG5cbiAgaW50ZXJhY3Rpb25zLmluc3RhbGwoc2NvcGUpXG5cbiAgdC5vayhzY29wZS5pbnRlcmFjdGlvbnMgaW5zdGFuY2VvZiBPYmplY3QsICdpbnRlcmFjdGlvbnMgb2JqZWN0IGFkZGVkIHRvIHNjb3BlJylcblxuICBjb25zdCBsaXN0ZW5lcnMgPSBzY29wZS5pbnRlcmFjdGlvbnMubGlzdGVuZXJzXG5cbiAgdC5vayhpbnRlcmFjdGlvbnMubWV0aG9kTmFtZXMucmVkdWNlKChhY2MsIG0pID0+IGFjYyAmJiB0eXBlb2YgbGlzdGVuZXJzW21dID09PSAnZnVuY3Rpb24nLCB0cnVlKSxcbiAgICAnaW50ZXJhY3Rpb25zIG9iamVjdCBhZGRlZCB0byBzY29wZScpXG5cbiAgc2NvcGUgPSBoZWxwZXJzLm1vY2tTY29wZSgpXG5cbiAgaW50ZXJhY3Rpb25zLmluc3RhbGwoc2NvcGUpXG4gIGNvbnN0IG5ld0ludGVyYWN0aW9uID0gc2NvcGUuaW50ZXJhY3Rpb25zLm5ldyh7fSlcblxuICB0LmFzc2VydCh0eXBlb2Ygc2NvcGUuaW50ZXJhY3Rpb25zID09PSAnb2JqZWN0JylcbiAgdC5hc3NlcnQoc2NvcGUuaW50ZXJhY3Rpb25zLnNpZ25hbHMgaW5zdGFuY2VvZiBTaWduYWxzKVxuICB0LmFzc2VydCh0eXBlb2Ygc2NvcGUuaW50ZXJhY3Rpb25zLm5ldyA9PT0gJ2Z1bmN0aW9uJylcbiAgdC5hc3NlcnQobmV3SW50ZXJhY3Rpb24gaW5zdGFuY2VvZiBJbnRlcmFjdGlvbilcbiAgdC5lcXVhbChuZXdJbnRlcmFjdGlvbi5fc2lnbmFscywgc2NvcGUuaW50ZXJhY3Rpb25zLnNpZ25hbHMpXG5cbiAgdC5hc3NlcnQodHlwZW9mIHNjb3BlLmFjdGlvbnMgPT09ICdvYmplY3QnKVxuICB0LmRlZXBFcXVhbChzY29wZS5hY3Rpb25zLm5hbWVzLCBbXSlcbiAgdC5kZWVwRXF1YWwoc2NvcGUuYWN0aW9ucy5tZXRob2REaWN0LCB7fSlcblxuICB0LmVuZCgpXG59KVxuXG50ZXN0KCdpbnRlcmFjdGlvbnMgZG9jdW1lbnQgZXZlbnQgb3B0aW9ucycsIHQgPT4ge1xuICBjb25zdCBzY29wZSA9IGhlbHBlcnMubW9ja1Njb3BlKClcbiAgY29uc3QgZG9jID0gc2NvcGUuZG9jdW1lbnRcblxuICBsZXQgb3B0aW9ucyA9IHt9XG4gIHNjb3BlLmJyb3dzZXIgPSB7IGlzSU9TOiBmYWxzZSB9XG4gIHNjb3BlLnNpZ25hbHMuZmlyZSgnYWRkLWRvY3VtZW50JywgeyBkb2MsIHNjb3BlLCBvcHRpb25zIH0pXG5cbiAgdC5kZWVwRXF1YWwoXG4gICAgb3B0aW9ucyxcbiAgICB7fSxcbiAgICAnbm8gZG9jIG9wdGlvbnMuZXZlbnQucGFzc2l2ZSBpcyBhZGRlZCB3aGVuIG5vdCBpT1MnKVxuXG4gIG9wdGlvbnMgPSB7fVxuXG4gIHNjb3BlLmJyb3dzZXIuaXNJT1MgPSB0cnVlXG4gIHNjb3BlLnNpZ25hbHMuZmlyZSgnYWRkLWRvY3VtZW50JywgeyBkb2MsIHNjb3BlLCBvcHRpb25zIH0pXG5cbiAgdC5kZWVwRXF1YWwoXG4gICAgb3B0aW9ucyxcbiAgICB7IGV2ZW50czogeyBwYXNzaXZlOiBmYWxzZSB9IH0sXG4gICAgJ2RvYyBvcHRpb25zLmV2ZW50LnBhc3NpdmUgaXMgc2V0IHRvIGZhbHNlIGZvciBpT1MnKVxuXG4gIHQuZW5kKClcbn0pXG4iXX0=