import isWindow from './isWindow';
const win = {
    realWindow: undefined,
    window: undefined,
    getWindow,
    init,
};
export function init(window) {
    // get wrapped window if using Shadow DOM polyfill
    win.realWindow = window;
    // create a TextNode
    const el = window.document.createTextNode('');
    // check if it's wrapped by a polyfill
    if (el.ownerDocument !== window.document &&
        typeof window.wrap === 'function' &&
        window.wrap(el) === el) {
        // use wrapped window
        window = window.wrap(window);
    }
    win.window = window;
}
if (typeof window === 'undefined') {
    win.window = undefined;
    win.realWindow = undefined;
}
else {
    init(window);
}
export function getWindow(node) {
    if (isWindow(node)) {
        return node;
    }
    const rootNode = (node.ownerDocument || node);
    return rootNode.defaultView || win.window;
}
win.init = init;
export default win;
//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoid2luZG93LmpzIiwic291cmNlUm9vdCI6IiIsInNvdXJjZXMiOlsid2luZG93LnRzIl0sIm5hbWVzIjpbXSwibWFwcGluZ3MiOiJBQUFBLE9BQU8sUUFBUSxNQUFNLFlBQVksQ0FBQTtBQUVqQyxNQUFNLEdBQUcsR0FBRztJQUNWLFVBQVUsRUFBRSxTQUFTO0lBQ3JCLE1BQU0sRUFBRSxTQUFTO0lBQ2pCLFNBQVM7SUFDVCxJQUFJO0NBQ0wsQ0FBQTtBQUVELE1BQU0sVUFBVSxJQUFJLENBQUUsTUFBTTtJQUMxQixrREFBa0Q7SUFFbEQsR0FBRyxDQUFDLFVBQVUsR0FBRyxNQUFNLENBQUE7SUFFdkIsb0JBQW9CO0lBQ3BCLE1BQU0sRUFBRSxHQUFHLE1BQU0sQ0FBQyxRQUFRLENBQUMsY0FBYyxDQUFDLEVBQUUsQ0FBQyxDQUFBO0lBRTdDLHNDQUFzQztJQUN0QyxJQUFJLEVBQUUsQ0FBQyxhQUFhLEtBQUssTUFBTSxDQUFDLFFBQVE7UUFDcEMsT0FBTyxNQUFNLENBQUMsSUFBSSxLQUFLLFVBQVU7UUFDbkMsTUFBTSxDQUFDLElBQUksQ0FBQyxFQUFFLENBQUMsS0FBSyxFQUFFLEVBQUU7UUFDeEIscUJBQXFCO1FBQ3JCLE1BQU0sR0FBRyxNQUFNLENBQUMsSUFBSSxDQUFDLE1BQU0sQ0FBQyxDQUFBO0tBQzdCO0lBRUQsR0FBRyxDQUFDLE1BQU0sR0FBRyxNQUFNLENBQUE7QUFDckIsQ0FBQztBQUVELElBQUksT0FBTyxNQUFNLEtBQUssV0FBVyxFQUFFO0lBQ2pDLEdBQUcsQ0FBQyxNQUFNLEdBQU8sU0FBUyxDQUFBO0lBQzFCLEdBQUcsQ0FBQyxVQUFVLEdBQUcsU0FBUyxDQUFBO0NBQzNCO0tBQ0k7SUFDSCxJQUFJLENBQUMsTUFBTSxDQUFDLENBQUE7Q0FDYjtBQUVELE1BQU0sVUFBVSxTQUFTLENBQUUsSUFBSTtJQUM3QixJQUFJLFFBQVEsQ0FBQyxJQUFJLENBQUMsRUFBRTtRQUNsQixPQUFPLElBQUksQ0FBQTtLQUNaO0lBRUQsTUFBTSxRQUFRLEdBQUcsQ0FBQyxJQUFJLENBQUMsYUFBYSxJQUFJLElBQUksQ0FBQyxDQUFBO0lBRTdDLE9BQU8sUUFBUSxDQUFDLFdBQVcsSUFBSSxHQUFHLENBQUMsTUFBTSxDQUFBO0FBQzNDLENBQUM7QUFFRCxHQUFHLENBQUMsSUFBSSxHQUFHLElBQUksQ0FBQTtBQUVmLGVBQWUsR0FBRyxDQUFBIiwic291cmNlc0NvbnRlbnQiOlsiaW1wb3J0IGlzV2luZG93IGZyb20gJy4vaXNXaW5kb3cnXG5cbmNvbnN0IHdpbiA9IHtcbiAgcmVhbFdpbmRvdzogdW5kZWZpbmVkLFxuICB3aW5kb3c6IHVuZGVmaW5lZCxcbiAgZ2V0V2luZG93LFxuICBpbml0LFxufVxuXG5leHBvcnQgZnVuY3Rpb24gaW5pdCAod2luZG93KSB7XG4gIC8vIGdldCB3cmFwcGVkIHdpbmRvdyBpZiB1c2luZyBTaGFkb3cgRE9NIHBvbHlmaWxsXG5cbiAgd2luLnJlYWxXaW5kb3cgPSB3aW5kb3dcblxuICAvLyBjcmVhdGUgYSBUZXh0Tm9kZVxuICBjb25zdCBlbCA9IHdpbmRvdy5kb2N1bWVudC5jcmVhdGVUZXh0Tm9kZSgnJylcblxuICAvLyBjaGVjayBpZiBpdCdzIHdyYXBwZWQgYnkgYSBwb2x5ZmlsbFxuICBpZiAoZWwub3duZXJEb2N1bWVudCAhPT0gd2luZG93LmRvY3VtZW50ICYmXG4gICAgICB0eXBlb2Ygd2luZG93LndyYXAgPT09ICdmdW5jdGlvbicgJiZcbiAgICB3aW5kb3cud3JhcChlbCkgPT09IGVsKSB7XG4gICAgLy8gdXNlIHdyYXBwZWQgd2luZG93XG4gICAgd2luZG93ID0gd2luZG93LndyYXAod2luZG93KVxuICB9XG5cbiAgd2luLndpbmRvdyA9IHdpbmRvd1xufVxuXG5pZiAodHlwZW9mIHdpbmRvdyA9PT0gJ3VuZGVmaW5lZCcpIHtcbiAgd2luLndpbmRvdyAgICAgPSB1bmRlZmluZWRcbiAgd2luLnJlYWxXaW5kb3cgPSB1bmRlZmluZWRcbn1cbmVsc2Uge1xuICBpbml0KHdpbmRvdylcbn1cblxuZXhwb3J0IGZ1bmN0aW9uIGdldFdpbmRvdyAobm9kZSkge1xuICBpZiAoaXNXaW5kb3cobm9kZSkpIHtcbiAgICByZXR1cm4gbm9kZVxuICB9XG5cbiAgY29uc3Qgcm9vdE5vZGUgPSAobm9kZS5vd25lckRvY3VtZW50IHx8IG5vZGUpXG5cbiAgcmV0dXJuIHJvb3ROb2RlLmRlZmF1bHRWaWV3IHx8IHdpbi53aW5kb3dcbn1cblxud2luLmluaXQgPSBpbml0XG5cbmV4cG9ydCBkZWZhdWx0IHdpblxuIl19